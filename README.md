# 智能客服 Agent 系统

这是一个基于大语言模型的智能客服 Agent 系统，展示了如何构建一个基础的对话式智能体。

## 系统特点

- 多业务线支持：注册、查询、删除用户数据
- 自动意图识别
- 状态管理机制
- 上下文感知对话

## 系统架构

### 核心组件

1. **SmartAssistant 类**
   - 负责管理整个对话过程
   - 处理用户输入
   - 维护对话状态
   - 生成响应

2. **提示词系统**
   - `sys_prompt`: 系统角色定义
   - `registered_prompt`: 注册业务处理
   - `query_prompt`: 查询业务处理
   - `delete_prompt`: 删除业务处理

3. **状态管理**
   - 使用 `current_assignment` 追踪当前状态
   - 通过特殊标记词实现状态转换
   - 维护各业务线独立的对话历史

## 安装说明

1. 安装依赖：
```bash
pip install -r requirements.txt
```

2. 配置环境变量：
   - 创建 `.env` 文件
   - 设置 API 密钥：`ZISHU_API_KEY=your_api_key_here`

3. 运行系统：
```bash
python client.py
```

## 使用说明

### 支持的业务类型

1. **用户注册**
   - 收集用户信息：姓名、性别、年龄
   - 设置密码
   - 收集邮箱地址

2. **用户数据查询**
   - 需要用户ID和密码
   - 返回用户信息

3. **删除用户数据**
   - 需要用户ID、密码和邮箱
   - 包含邮箱验证流程

### 对话示例

```
User: 我想注册一个新账号
Assistant: 好的，我来帮您注册。请提供以下信息：
1. 您的姓名、性别和年龄
2. 设置一个密码
3. 您的电子邮箱地址

User: 我的名字是张三，男，25岁
Assistant: 好的，张三先生。请设置您的密码，并提供您的电子邮箱地址。
```

## 系统扩展

系统设计具有良好的扩展性，可以通过以下方式进行扩展：

1. 添加新的业务线
   - 创建新的提示词
   - 添加相应的状态转换逻辑

2. 增强功能
   - 添加数据库连接
   - 集成外部API
   - 添加更多的对话能力

## 技术细节

### 依赖项
- openai：用于与语言模型交互
- python-dotenv：用于环境变量管理

### 核心类方法

- `__init__`: 初始化系统状态和提示词
- `get_response`: 处理用户输入并生成响应
- `start_conversation`: 启动对话循环

### 状态转换机制

系统通过特殊标记词进行状态转换：
- "registered workers": 切换到注册业务
- "query workers": 切换到查询业务
- "delete workers": 切换到删除业务
- "customer service": 返回系统状态

## 注意事项

1. API密钥安全
   - 不要在代码中硬编码API密钥
   - 使用环境变量管理敏感信息

2. 数据处理
   - 当前版本模拟数据库操作
   - 实际应用需要实现真实的数据库连接

3. 错误处理
   - 建议添加更完善的错误处理机制
   - 考虑网络连接异常情况

## 后续优化方向

1. 添加数据持久化
2. 实现更复杂的对话管理
3. 添加多轮对话理解
4. 集成更多外部服务
5. 添加用户会话管理
6. 实现并发处理能力

## 贡献指南

欢迎提交 Issue 和 Pull Request 来改进系统。在提交代码前，请确保：

1. 代码符合 PEP 8 规范
2. 添加必要的注释
3. 更新文档
4. 添加测试用例

## 许可证

MIT License 